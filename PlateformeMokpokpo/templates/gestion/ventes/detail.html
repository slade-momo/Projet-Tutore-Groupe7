{% extends "base.html" %}

{% block title %}{{ vente.numero_vente }} - Détail Vente{% endblock %}
{% block page_title %}Détail de la Vente{% endblock %}
{% block breadcrumbs %}<i class="fas fa-home"></i> <a href="{% url 'dashboard' %}">Accueil</a> / <a href="{% url 'ventes_list' %}">Ventes</a> / {{ vente.numero_vente }}{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-8 mb-4">
            <div class="card">
                <div class="card-header d-flex justify-content-between align-items-center">
                    <span><i class="fas fa-shopping-cart"></i> Vente {{ vente.numero_vente }}</span>
                    <span class="badge bg-success"><i class="fas fa-lock"></i> Confirmée</span>
                </div>
                <div class="card-body">
                    <table class="table table-borderless">
                        <tr>
                            <th style="width: 35%;">Numéro Vente</th>
                            <td>{{ vente.numero_vente }}</td>
                        </tr>
                        <tr>
                            <th>Client</th>
                            <td>
                                {% if vente.client %}
                                <a href="{% url 'clients_detail' vente.client.pk %}">{{ vente.client.nom }}</a>
                                {% else %}—{% endif %}
                            </td>
                        </tr>
                        <tr>
                            <th>Lot</th>
                            <td>
                                {% if vente.lot %}
                                <a href="{% url 'lots_detail' vente.lot.pk %}">{{ vente.lot.code_lot }}</a>
                                {% else %}—{% endif %}
                            </td>
                        </tr>
                        <tr>
                            <th>Quantité vendue</th>
                            <td>{{ vente.quantite_vendue }}</td>
                        </tr>
                        <tr>
                            <th>Montant total</th>
                            <td class="text-success fw-bold">{{ vente.montant_total }} XOF</td>
                        </tr>
                        <tr>
                            <th>Mode de paiement</th>
                            <td><span class="badge bg-info">{{ vente.mode_paiement }}</span></td>
                        </tr>
                        <tr>
                            <th>Date de vente</th>
                            <td>{{ vente.date_vente|date:"d/m/Y H:i" }}</td>
                        </tr>
                        <tr>
                            <th>Observations</th>
                            <td>{{ vente.observations|default:"—" }}</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>

        <div class="col-lg-4 mb-4">
            <div class="card">
                <div class="card-header">
                    <i class="fas fa-info-circle"></i> Résumé
                </div>
                <div class="card-body text-center">
                    <h2 class="text-success">{{ vente.montant_total }} XOF</h2>
                    <p class="text-muted">Montant total</p>
                    <hr>
                    <p><strong>{{ vente.quantite_vendue }}</strong> unités vendues</p>
                    <p><span class="badge bg-info">{{ vente.mode_paiement }}</span></p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
